module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(l=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(i).concat([r]).join("\n")}var l;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(o[i]=!0)}for(r=0;r<e.length;r++){var l=e[r];null!=l[0]&&o[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="("+l[2]+") and ("+n+")"),t.push(l))}},t}},function(e,t,n){var o,r,i={},l=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e){var t={};return function(e){if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,c=0,u=[],f=n(6);function d(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var l=0;l<r.parts.length;l++)r.parts[l](o.parts[l]);for(;l<o.parts.length;l++)r.parts.push(g(o.parts[l],t))}else{var a=[];for(l=0;l<o.parts.length;l++)a.push(g(o.parts[l],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function h(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],l=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[l]?o[l].parts.push(a):n.push(o[l]={id:l,parts:[a]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),m(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var l=c++;n=s||(s=v(t)),o=w.bind(null,n,l,!1),r=w.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),m(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=f(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var l=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(l),a&&URL.revokeObjectURL(a)}.bind(null,n,t),r=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=function(e,t){var n=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){p(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=l()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return d(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var l=n[r];(a=i[l.id]).refs--,o.push(a)}e&&d(h(e,t),t);for(r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var s=0;s<a.parts.length;s++)a.parts[s]();delete i[a.id]}}}};var y,C=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=C(t,r);else{var i=document.createTextNode(r),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}},function(e,t,n){var o=n(5);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0};n(3)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".v-table-header .v-table-container .v-table-main-container {\n  overflow-y: hidden;\n}\n.v-table-container {\n  display: flex;\n  border: 1px solid #e3e4e8;\n}\n.v-table-container .v-table-left-columns-container {\n  overflow: hidden;\n}\n.v-table-container .v-table-left-columns-container .v-table-row {\n  display: flex;\n}\n.v-table-container .v-table-main-container {\n  overflow: auto;\n}\n.v-table-container .v-table-main-container .v-table-row {\n  display: flex;\n}\n.v-table-container .v-table-fixed-left {\n  box-shadow: 6px 0 6px -4px rgba(0, 0, 0, 0.15);\n}\n.v-table-container .v-table-fixed-right {\n  box-shadow: -6px 0 6px -4px rgba(0, 0, 0, 0.15);\n}\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){var o=n(8);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0};n(3)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,'/* VTable*/\n.v-table-header .v-grid-container {\n  background: #f4f6f9;\n  border-bottom: none;\n}\n.v-table-header .v-grid-container .v-grid-left-columns-container {\n  overflow: hidden;\n}\n.v-table-header .v-grid-container .v-grid-left-columns-container .v-grid-cell {\n  border-bottom: none !important;\n}\n.v-table-header .v-grid-container .v-grid-main-container {\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n.v-table-header .v-grid-container .v-grid-main-container::-webkit-scrollbar {\n  background: transparent;\n}\n.v-table-header .v-grid-container .v-grid-main-container .v-grid-cell {\n  border-bottom: none !important;\n}\n/* Grid*/\n.v-grid-container {\n  position: relative;\n  display: flex;\n  border: 1px solid #e3e4e8;\n}\n.v-grid-container .v-grid-left-columns-container {\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.v-grid-container .v-grid-left-columns-container::-webkit-scrollbar {\n  background: transparent;\n}\n.v-grid-container .v-grid-left-columns-container .v-grid-row {\n  display: flex;\n}\n.v-grid-container .v-grid-left-columns-container .v-grid-row .v-grid-cell {\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid #e3e4e8;\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  word-break: break-all;\n}\n.v-grid-container .v-grid-main-container {\n  overflow: auto;\n}\n.v-grid-container .v-grid-main-container .v-grid-row {\n  display: flex;\n}\n.v-grid-container .v-grid-main-container .v-grid-row .v-grid-cell {\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid #e3e4e8;\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  word-break: break-all;\n}\n.v-grid-container .v-grid-fixed-left {\n  box-shadow: 6px 0 6px -4px rgba(0, 0, 0, 0.15);\n}\n.v-grid-container .v-grid-fixed-right {\n  box-shadow: -6px 0 6px -4px rgba(0, 0, 0, 0.15);\n}\n.v-grid-container .v-container-empty {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.v-row-remove {\n  position: absolute;\n  top: -20px;\n  left: -20px;\n  border: 20px solid;\n  border-color: red transparent transparent transparent;\n  transform: rotate(135deg);\n  cursor: pointer;\n}\n.v-row-remove:after {\n  content: "x";\n  position: absolute;\n  top: -20px;\n  left: -2px;\n  color: #fff;\n  transform: rotate(45deg);\n}\n',""])},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(1),l=n.n(i);n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).state={columns:[],virtualColumns:[],dataSource:[],virtualData:[],visibleHeight:e.visibleHeight||400,estimatedRowHeight:40,rowVisibleCount:10,rowOffsetCount:5,startRowIndex:0,endRowIndex:0,startVerticalOffset:0,endVerticalOffset:0,fixedLeftColumnCount:1,visibleWidth:e.visibleWidth||1200,estimatedColumnWidth:150,columnVisibleCount:8,columnOffsetCount:4,startColumnIndex:0,endColumnIndex:0,startHorizontalOffset:0,endHorizontalOffset:0,fixedLeftColumns:0,scrollLeft:0},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){if(console.log(e.dataSource!==t.dataSource),e.dataSource!==t.dataSource){var n=Math.ceil(t.visibleHeight/t.estimatedRowHeight),o=t.startRowIndex+n+2*t.rowOffsetCount,r=Math.ceil(t.visibleWidth/t.estimatedColumnWidth),i=t.startColumnIndex+r+2*t.columnOffsetCount,l=e.columns.slice(0,e.fixedLeftColumnCount);return{columns:e.columns,fixedLeftColumns:l,fixedLeftColumnCount:e.fixedLeftColumnCount,virtualColumns:e.columns.slice(t.startColumnIndex,i),startHorizontalOffset:t.startColumnIndex*t.estimatedColumnWidth,endHorizontalOffset:(e.columns.length-i)*t.estimatedColumnWidth,columnVisibleCount:r,dataSource:e.dataSource,virtualData:e.dataSource.slice(t.startRowIndex,o),startVerticalOffset:t.startRowIndex*t.estimatedRowHeight,endVerticalOffset:(e.dataSource.length-o)*t.estimatedRowHeight,rowVisibleCount:n}}return null}}],(o=[{key:"componentDidMount",value:function(){var e=this;this.setState({visibleHeight:this._container.clientHeight,visibleWidth:this._container.clientWidth}),this._container.addEventListener("scroll",function(){console.log(e._container.scrollTop,e._leftContainer.scrollTop),e._leftContainer.scrollTop=e._container.scrollTop})}},{key:"_onVerticalScroll",value:function(){var e=this._container.scrollTop,t=this.state,n=t.dataSource,o=t.estimatedRowHeight,r=t.rowOffsetCount,i=t.rowVisibleCount,l=Math.floor(e/o),a=l-r>0?l-r:0,s=i+l+r>n.length?n.length:i+l+r,c=a*o,u=(n.length-s)*o,f=n.slice(a,s);console.log(l,a,s,c,u,f,"垂直滚动"),this.setState({startRowIndex:a,endRowIndex:s,startVerticalOffset:c,endVerticalOffset:u,virtualData:f})}},{key:"_onHorizontalScroll",value:function(){var e=this._container.scrollLeft,t=this.state,n=t.columns,o=t.estimatedColumnWidth,r=t.columnOffsetCount,i=t.columnVisibleCount,l=Math.floor(e/o),a=l-r>0?l-r:0,s=i+l+r>n.length?n.length:i+l+r,c=a*o,u=(n.length-s)*o,f=n.slice(a,s);console.table({"columns.length":n.length,"scrollLeftNum水平滚动的条数":l,"startColumnIndex要渲染的列开始坐标":a,"endColumnIndex要渲染的列结尾坐标":s,"startHorizontalOffset左边未渲染数据的paddingLeft值":c,"endHorizontalOffset右边未渲染数据的paddingRight值":u}),console.log("需要渲染显示的列数据",f),console.log("总columns",n),this.setState({scrollLeft:e,startColumnIndex:a,endColumnIndex:s,startHorizontalOffset:c,endHorizontalOffset:u,virtualColumns:f})}},{key:"_onScrollEvent",value:function(){console.log(this),this.__onScroll(this._container.scrollLeft),this._onVerticalScroll(),this._onHorizontalScroll();var e=this.state.scrollPosition,t=this._container.scrollTop-e>0;this.setState({scrollPosition:this._container.scrollTop});var n=this._container.scrollHeight-this._container.scrollTop-this._container.clientHeight;this._container.scrollHeight,this._container.scrollTop,this._container.clientHeight;!t&&this._container.scrollTop,console.table({"scrollTop 滚动的高度":this._container.scrollTop,"scrollLeft 滚动的宽度":this._container.scrollLeft,"clientHeight 视窗高度":this._container.clientHeight,"scrollHeight 页面高度":this._container.scrollHeight,"height 距离页面底部的高度":n,"滚动方向":t?"下":"上"})}},{key:"_cellRender",value:function(e,t,n,o){var i=this,l=t+this.state.startRowIndex,a=o+this.state.startColumnIndex,s=e[n.key];return r.a.createElement("div",{style:{minWidth:150},onClick:function(){return i.__onCellTap(e)}},n.render?n.render(s):e[n.key],"[",l,", ",a,"]")}},{key:"render",value:function(){var e=this,t=this.state,n=t.fixedLeftColumns,o=t.virtualColumns,i=t.startHorizontalOffset,l=t.endHorizontalOffset,a=t.visibleWidth,s=t.scrollLeft,c=t.virtualData,u=t.startVerticalOffset,f=t.endVerticalOffset,d=t.estimatedRowHeight,h=t.visibleHeight;return console.log(c,"-"),console.log(o,"|"),r.a.createElement("div",{className:"v-table-container"},r.a.createElement("div",{className:"v-table-left-columns-container ".concat(s>0&&"v-table-fixed-left"),ref:function(t){return e._leftContainer=t},style:{width:300,height:h}},r.a.createElement("div",{style:{paddingTop:u,paddingBottom:f}},c.map(function(t,o){return r.a.createElement(r.a.Fragment,{key:o},r.a.createElement("div",{className:"v-table-row",style:{width:300,height:d}},n.map(function(n,i){return r.a.createElement(r.a.Fragment,{key:i},e._cellRender(t,o,n,i))})))}))),r.a.createElement("div",{className:"v-table-main-container",ref:function(t){return e._container=t},onScrollCapture:this._onScrollEvent.bind(this),style:{width:a,height:h,minHeight:d}},r.a.createElement("div",{style:{paddingTop:u,paddingBottom:f}},c.map(function(t,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{className:"v-table-row",style:{height:d,width:a,paddingLeft:i,paddingRight:l}},o.map(function(o,i){return r.a.createElement(r.a.Fragment,{key:i},e._cellRender(t,n,o,i))})))}))))}},{key:"__onScroll",value:function(e){var t=this.props.onScroll;"function"==typeof t&&t(e)}},{key:"__onCellTap",value:function(e){var t=this.props.onCellTap;"function"==typeof t&&t(e)}}])&&s(n.prototype,o),i&&s(n,i),t}();d.propTypes={title:l.a.string,columns:l.a.array,fixedLeftColumnCount:l.a.number,dataSource:l.a.array,visibleWidth:l.a.number,visibleHeight:l.a.number,onScroll:l.a.func,onCellTap:l.a.func};var h=d,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach(function(e){t+=e.width}),t};n(7);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,C(t).call(this,e))).state={columns:[],virtualColumns:[],dataSource:[],virtualData:[],visibleHeight:e.visibleHeight||400,estimatedRowHeight:40,rowVisibleCount:10,rowOffsetCount:5,startRowIndex:0,endRowIndex:0,startVerticalOffset:0,endVerticalOffset:0,visibleWidth:e.visibleWidth||1200,estimatedColumnWidth:150,columnVisibleCount:8,columnOffsetCount:e.columnOffsetCount||4,startColumnIndex:0,endColumnIndex:0,startHorizontalOffset:0,endHorizontalOffset:0,scrollLeft:0,fixedLeftColumnCount:0,fixedLeftColumns:[],fixedLeftColumnsWidth:0,scrollColumns:[],scrollColumnsWidth:e.visibleWidth||1200},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,r.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){if(console.log(e.dataSource!==t.dataSource),e.dataSource!==t.dataSource){var n=Math.ceil(t.visibleHeight/t.estimatedRowHeight),o=t.startRowIndex+n+2*t.rowOffsetCount,r=t.visibleWidth,i=e.columns.slice(0,e.fixedLeftColumnCount),l=m(i),a=e.columns.slice(e.fixedLeftColumnCount,e.columns.length),s=r-l,c=Math.ceil(s/t.estimatedColumnWidth),u=t.startColumnIndex+c+2*t.columnOffsetCount,f=a.slice(0,t.startColumnIndex),d=m(f),h=a.slice(u,a.length),p=m(h);return console.log(e.visibleHeight,"---"),{visibleHeight:e.visibleHeight,columns:e.columns,fixedLeftColumns:i,fixedLeftColumnsWidth:l,scrollColumns:a,scrollColumnsWidth:s,fixedLeftColumnCount:e.fixedLeftColumnCount,virtualColumns:a.slice(t.startColumnIndex,u),startHorizontalOffset:d,endHorizontalOffset:p,columnVisibleCount:c,dataSource:e.dataSource,virtualData:e.dataSource.slice(t.startRowIndex,o),startVerticalOffset:t.startRowIndex*t.estimatedRowHeight,endVerticalOffset:(e.dataSource.length-o)*t.estimatedRowHeight,rowVisibleCount:n}}return null}}],(o=[{key:"componentWillReceiveProps",value:function(e){var t=this.state;if(e.dataSource!==t.dataSource){var n=Math.ceil(t.visibleHeight/t.estimatedRowHeight),o=t.startRowIndex+n+2*t.rowOffsetCount,r=this._masterContainer.clientWidth,i=e.columns.slice(0,e.fixedLeftColumnCount),l=m(i),a=e.columns.slice(e.fixedLeftColumnCount,e.columns.length),s=r-l,c=Math.ceil(s/t.estimatedColumnWidth),u=t.startColumnIndex+c+2*t.columnOffsetCount,f=a.slice(0,t.startColumnIndex),d=m(f),h=a.slice(u,a.length),p=m(h);this.setState({visibleHeight:e.visibleHeight,columns:e.columns,fixedLeftColumns:i,fixedLeftColumnsWidth:l,scrollColumns:a,scrollColumnsWidth:s,fixedLeftColumnCount:e.fixedLeftColumnCount,virtualColumns:a.slice(t.startColumnIndex,u),startHorizontalOffset:d,endHorizontalOffset:p,columnVisibleCount:c,dataSource:e.dataSource,virtualData:e.dataSource.slice(t.startRowIndex,o),startVerticalOffset:t.startRowIndex*t.estimatedRowHeight,endVerticalOffset:(e.dataSource.length-o)*t.estimatedRowHeight,rowVisibleCount:n})}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=this._masterContainer.clientHeight,o=this._masterContainer.clientWidth,r=t.columns.slice(0,t.fixedLeftColumnCount),i=m(r),l=t.columns.slice(t.fixedLeftColumnCount,t.columns.length),a=o-i;this.setState({visibleHeight:n,visibleWidth:o,fixedLeftColumns:r,fixedLeftColumnsWidth:i,scrollColumns:l,scrollColumnsWidth:a}),this._scrollContainer.addEventListener("scroll",function(){console.log(e._scrollContainer.scrollTop,e._leftContainer.scrollTop),e._leftContainer.scrollTop=e._scrollContainer.scrollTop})}},{key:"_onVerticalScroll",value:function(){var e=this._scrollContainer.scrollTop,t=this.state,n=t.dataSource,o=t.estimatedRowHeight,r=t.rowOffsetCount,i=t.rowVisibleCount,l=Math.floor(e/o),a=l-r>0?l-r:0,s=i+l+r>n.length?n.length:i+l+r,c=a*o,u=(n.length-s)*o,f=n.slice(a,s);console.log(l,a,s,c,u,f,"垂直滚动"),this.setState({startRowIndex:a,endRowIndex:s,startVerticalOffset:c,endVerticalOffset:u,virtualData:f})}},{key:"_onHorizontalScroll",value:function(){var e=this._scrollContainer.scrollLeft,t=this.state,n=t.scrollColumns,o=t.estimatedColumnWidth,r=t.columnOffsetCount,i=t.columnVisibleCount,l=Math.floor(e/o),a=l-r>0?l-r:0,s=i+l+r>n.length?n.length:i+l+r,c=n.slice(0,a),u=m(c),f=n.slice(s,n.length),d=m(f),h=n.slice(a,s);console.table({"scrollColumns.length":n.length,"scrollLeftNum水平滚动的条数":l,"startColumnIndex要渲染的列开始坐标":a,"endColumnIndex要渲染的列结尾坐标":s,"startHorizontalOffset左边未渲染数据的paddingLeft值":u,"endHorizontalOffset右边未渲染数据的paddingRight值":d}),console.log("需要渲染显示的列数据",h),console.log("总scrollColumns",n),this.setState({scrollLeft:e,startColumnIndex:a,endColumnIndex:s,startHorizontalOffset:u,endHorizontalOffset:d,virtualColumns:h})}},{key:"_onScrollEvent",value:function(){console.log(this),this.__onScroll(this._scrollContainer.scrollLeft),this._onVerticalScroll(),this._onHorizontalScroll();var e=this.state.scrollPosition,t=this._scrollContainer.scrollTop-e>0;this.setState({scrollPosition:this._scrollContainer.scrollTop});var n=this._scrollContainer.scrollHeight-this._scrollContainer.scrollTop-this._scrollContainer.clientHeight;this._scrollContainer.scrollHeight,this._scrollContainer.scrollTop,this._scrollContainer.clientHeight;!t&&this._scrollContainer.scrollTop,console.table({"scrollTop 滚动的高度":this._scrollContainer.scrollTop,"scrollLeft 滚动的宽度":this._scrollContainer.scrollLeft,"clientHeight 视窗高度":this._scrollContainer.clientHeight,"scrollHeight 页面高度":this._scrollContainer.scrollHeight,"height 距离页面底部的高度":n,"滚动方向":t?"下":"上"})}},{key:"_cellRender",value:function(e,t,n,o){var i=this,l=t+this.state.startRowIndex,a=o+this.state.startColumnIndex,s=e[n.key],c=n.width||150;return r.a.createElement("div",{onClick:function(){return i.__onCellTap(s,e,t,l,n,o,a)},className:"v-grid-cell ".concat(n.className||""),style:v({width:c,minWidth:c,height:this.state.estimatedRowHeight,background:e.checked||e.hover?"#e6f7ff":""},n.style)},this._render(s,e,t,l,n,o,a))}},{key:"_render",value:function(e,t,n,o,r,i,l){return"header"===this.props.type?r.headRender?r.headRender(e,t,n,o,r,i,l):t[r.key]:r.render?r.render(e,t,n,o,r,i,l):t[r.key]}},{key:"_mouseEnter",value:function(e){if("header"!==this.props.type){var t=this.state.virtualData;t.map(function(t,n){t.hover=!1,n===e&&(t.hover=!0)}),this.setState({virtualData:t})}}},{key:"_mouseLeave",value:function(e){if("header"!==this.props.type){var t=this.state.virtualData;t[e].hover=!1,this.setState({virtualData:t})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.fixedLeftColumns,o=t.fixedLeftColumnsWidth,i=t.scrollColumnsWidth,l=t.virtualColumns,a=t.startHorizontalOffset,s=t.endHorizontalOffset,c=t.scrollLeft,u=t.virtualData,f=t.startVerticalOffset,d=t.endVerticalOffset,h=t.estimatedRowHeight,m=t.visibleHeight,p=t.dataSource;return r.a.createElement("div",null,r.a.createElement("div",{className:"v-grid-container",ref:function(t){return e._masterContainer=t}},r.a.createElement("div",{className:"v-grid-left-columns-container ".concat(c>0&&"v-grid-fixed-left"),ref:function(t){return e._leftContainer=t},style:{width:o,minWidth:o,height:m}},r.a.createElement("div",{style:{paddingTop:f,paddingBottom:d}},u.map(function(t,i){return r.a.createElement("div",{key:i},r.a.createElement("div",{className:"v-grid-row",onMouseEnter:function(){return e._mouseEnter(i)},onMouseLeave:function(){return e._mouseLeave(i)},style:{width:o,minWidth:o,height:h}},n.map(function(n,o){return r.a.createElement("div",{key:o},e._cellRender(t,i,n,o))})))}))),r.a.createElement("div",{className:"v-grid-main-container",ref:function(t){return e._scrollContainer=t},onScrollCapture:this._onScrollEvent.bind(this),style:{width:i,height:m,minHeight:h}},r.a.createElement("div",{style:{paddingTop:f,paddingBottom:d}},u.map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement("div",{className:"v-grid-row",onMouseEnter:function(){return e._mouseEnter(n)},onMouseLeave:function(){return e._mouseLeave(n)},style:{height:h,width:i,paddingLeft:a,paddingRight:s}},l.map(function(o,i){return r.a.createElement("div",{key:i},e._cellRender(t,n,o,i))})))}))),p.length<1&&r.a.createElement("div",{className:"v-container-empty"},this.props.emptyText)))}},{key:"__onScroll",value:function(e){var t=this.props.onScroll;"function"==typeof t&&t(e)}},{key:"__onCellTap",value:function(e,t,n,o,r,i,l){var a=this.props.onCellTap;"function"==typeof a&&a(e,t,n,o,r,i,l)}}])&&g(n.prototype,o),i&&g(n,i),t}();x.propTypes={type:l.a.string,title:l.a.string,columns:l.a.array,fixedLeftColumnCount:l.a.number,dataSource:l.a.array,visibleWidth:l.a.number,visibleHeight:l.a.number,columnOffsetCount:l.a.number,emptyText:l.a.element,onScroll:l.a.func,onCellTap:l.a.func};var _=x;function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=k(this,R(t).call(this))).state={list:[],columns:[],columnData:[{}],dataSource:[],selected:[],selectedRows:[]},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.state;if(e.dataSource!==n.dataSource){var o=e.columns;e.rowSelection&&o.unshift({width:60,style:{justifyContent:"center"},headRender:function(e,n,o,i){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",onChange:function(e){return t._select(e,n,i)},checked:n.checked||!1}))},render:function(n,o,i,l){return[o&&o.hover&&r.a.createElement("div",{key:0,onClick:function(e){return t.__onRowRemove(e,o)}},e.rowRemoveText||r.a.createElement("div",{className:"v-row-remove"})),r.a.createElement("div",{key:1,onClick:function(e){return t._select(e,o,l)}},r.a.createElement("input",{type:"checkbox",checked:o.checked||!1}))]}}),this.setState({columns:o,columnData:this.getColumnData(o),dataSource:e.dataSource})}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.columns;t.rowSelection&&n.unshift({width:60,style:{justifyContent:"center"},headRender:function(t,n,o,i){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",onChange:function(t){return e._select(t,n,i)},checked:n.checked||!1}))},render:function(n,o,i,l){return[o&&o.hover&&r.a.createElement("div",{key:0,onClick:function(t){return e.__onRowRemove(t,o)}},t.rowRemoveText||r.a.createElement("div",{className:"v-row-remove"})),r.a.createElement("div",{key:1,onClick:function(t){return e._select(t,o,l)}},r.a.createElement("input",{type:"checkbox",checked:o.checked||!1}))]}}),this.setState({columns:n,columnData:this.getColumnData(n),dataSource:t.dataSource})}},{key:"getColumnData",value:function(e){var t=[{}];return e.forEach(function(e){t[0][e.key]=e.title}),t[0].selection="all",t}},{key:"render",value:function(){var e=this,t=this.state,n=t.columns,o=t.columnData,i=t.dataSource,l=this.props,a=l.className,s=l.visibleWidth,c=void 0===s?1200:s,u=l.visibleHeight,f=void 0===u?400:u,d=l.fixedLeftColumnCount,h=void 0===d?0:d,m=l.columnOffsetCount,p=void 0===m?0:m,v=l.emptyText;return r.a.createElement("div",{className:"v-table ".concat(a)},r.a.createElement("div",{className:"v-table-header"},r.a.createElement(_,{type:"header",ref:function(t){return e._header=t},title:"title",visibleWidth:c,visibleHeight:40,columns:n,dataSource:o,fixedLeftColumnCount:h,columnOffsetCount:p,rowSelection:this.props.rowSelection})),r.a.createElement("div",{className:"v-table-content"},r.a.createElement(_,{title:"title",visibleWidth:c,visibleHeight:f,columns:n,dataSource:i,fixedLeftColumnCount:h,columnOffsetCount:p,onScroll:this.onScroll.bind(this),onCellTap:this.__onCellTap.bind(this),emptyText:v})))}},{key:"onScroll",value:function(e){console.log(this._header._scrollContainer.scrollLeft,"header"),console.log(e,"onScroll callback"),this._header._scrollContainer.scrollLeft=e}},{key:"test",value:function(){console.log("test")}},{key:"__onCellTap",value:function(e,t,n,o,r,i,l){var a=this.props.onCellTap;"function"==typeof a&&a(e,t,n,o,r,i,l)}},{key:"__onRowRemove",value:function(e,t){e.stopPropagation();var n=this.props.onRowRemove;"function"==typeof n&&n(e,t)}},{key:"_select",value:function(e,t,n){e.stopPropagation(),t.selection&&"all"===t.selection?this.__onSelectAll(t):this.__onSelect(t,n)}},{key:"__onSelectAll",value:function(e){var t=this.props,n=t.onSelectAll,o=t.rowKey,r=this.state.dataSource;if("function"==typeof n){var i=JSON.parse(JSON.stringify(r)),l=[],a=[];e.checked?(e.checked=!1,r.map(function(e){return e.checked=!1,e}),this.setState({dataSource:r,selected:[],selectedRows:[]})):(e.checked=!0,r.map(function(e){return e.checked=!0,e}),this.setState({dataSource:r,selected:i,selectedRows:i.map(function(e,t){return o?e[o]:t})}),l=i,a=i.map(function(e,t){return o?e[o]:t})),n(l,a)}}},{key:"__onSelect",value:function(e,t){var n=this.props,o=n.onSelect,r=n.rowKey,i=this.state,l=i.selected,a=i.selectedRows;"function"==typeof o&&(e.checked?(e.checked=!1,l[t]=void 0,a[t]=void 0):(e.checked=!0,l[t]=e,a[t]=r?e[r]:t),o(e,l.filter(function(e){return e}),a.filter(function(e){return 0===e||e})))}}])&&O(n.prototype,o),i&&O(n,i),t}();L.propTypes={className:l.a.string,columns:l.a.array,fixedLeftColumnCount:l.a.number,columnOffsetCount:l.a.number,dataSource:l.a.array,visibleWidth:l.a.number,visibleHeight:l.a.number,rowSelection:l.a.object,emptyText:l.a.element,rowKey:l.a.string,onCellTap:l.a.func,onSelectAll:l.a.func,onSelect:l.a.func,onRowRemove:l.a.func,rowRemoveText:l.a.element};var E=L;n.d(t,"Table",function(){return h}),n.d(t,"VTable",function(){return E}),n.d(t,"Grid",function(){return _})}]);